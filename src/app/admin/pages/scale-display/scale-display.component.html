<div class="scale-container">
  <!-- Toggle Debug Mode -->
  <div class="mode-toggle">
    <button (click)="toggleDebugMode()" [class.active]="debugMode">
      {{ debugMode ? 'ğŸ” Debug Mode ON' : 'ğŸ“Š Normal Mode' }}
    </button>
  </div>

  <!-- Normal Mode -->
  <div *ngIf="!debugMode" class="scale-box">
    <div *ngIf="error" class="error">{{ error }}</div>

    <div class="status">
      <button (click)="connect()">Connect</button>
      <button (click)="disconnect()">Disconnect</button>
      <button (click)="reqWeight()">Request</button>
      <span *ngIf="connected">â— Connected</span>
      <span *ngIf="!connected">â—‹ Disconnected</span>
    </div>

    <div class="display">
      <h1 *ngIf="weight !== null">{{ weight | number : '1.0-0' }} kg</h1>
      <h1 *ngIf="weight === null">-- kg</h1>

      <div *ngIf="stable" class="stable">STABLE</div>
      <div *ngIf="!stable" class="unstable">UNSTABLE</div>
    </div>
  </div>

  <!-- Debug Mode -->
  <div *ngIf="debugMode" class="debug-box">
    <div class="header">
      <h2>ğŸ” Raw Data Debug</h2>
      <p>Melihat data mentah dari timbangan tanpa parsing</p>
    </div>

    <div class="controls">
      <button (click)="connect()" [disabled]="connected" class="btn-connect">ğŸ“¡ Connect</button>
      <button (click)="disconnect()" [disabled]="!connected" class="btn-disconnect">
        ğŸ”Œ Disconnect
      </button>
      <button (click)="clearLog()" class="btn-clear">ğŸ—‘ï¸ Clear</button>
      <button (click)="copyLog()" [disabled]="rawData.length === 0" class="btn-copy">
        ğŸ“‹ Copy
      </button>

      <div class="status-debug">
        <span *ngIf="connected" class="connected">â— Connected</span>
        <span *ngIf="!connected" class="disconnected">â—‹ Disconnected</span>
      </div>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>

    <div class="log-container">
      <pre class="log">{{ rawData.join('\n') }}</pre>
    </div>

    <div class="info">
      <strong>ğŸ“– Format Data:</strong>
      <ul>
        <li><strong>UTF-8</strong>: Text yang terbaca</li>
        <li><strong>HEX</strong>: Hexadecimal bytes</li>
        <li><strong>ASCII</strong>: Karakter + kontrol (\r \n)</li>
        <li><strong>DEC</strong>: Decimal bytes</li>
      </ul>
    </div>
  </div>
</div>
